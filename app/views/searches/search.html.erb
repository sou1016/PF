<!--検索窓-->
  <div class="search_form">
    <%= form_with url: search_path, local: true, method: :get do |f| %>
      <%= f.text_field :word %>
      <%= f.select :range, options_for_select([['member'], ['post']]) %>
      <%= f.submit "検索", class: "btn btn-primary" %>
    <% end %>
  </div>

  <table>
    <% @genres.each do |genre| %>
    <%= link_to genre.name, search_path(genre) %>
    <% end %>
  </table>



<h2>検索結果</h2>

<table class="table table-hover table-inverse">
  <!--検索対象モデルがMemberの時-->
  <% if @range == "member" %>
    <tbody>
      <% @members.each do |member| %>
        <tr>
        <%= link_to public_member_path(member.id) do %>
          <td><%= image_tag member.get_profile_image(50, 50) %></td>
        <% end %>
          <td><%= member.name %></td>
        </tr>
      <% end %>
    </tbody>
  <% else %>
    <!--検索対象モデルがMemberではない時(= 検索対象モデルがPostの時)-->
    <tbody>
      <% @posts.each do |post| %>
        <tr>
          <%= image_tag post.member.get_profile_image(50, 50) %>
          <%= post.member.name %><br>
          <%= link_to public_post_path(post.id) do %>
            <%= image_tag post.get_image(150, 150) %>
          <% end %>
          <p>ジャンル：<%= post.genre.name %></p>
          <p>概要：<%= post.body %></p>
          <p>投稿日：<%= post.created_at.strftime('%Y/%m/%d') %></p>
          <% if post.favorited_by?(current_member) %>
            <p>
              <%= link_to public_post_favorites_path(post), method: :delete do %>
                ♥<%= post.favorites.count %>
              <% end %>
            </p>
            <% else %>
            <p>
              <%= link_to public_post_favorites_path(post), method: :post do %>
                ♡<%= post.favorites.count %>
              <% end %>
            </p>
          <% end %>
          <p><%= link_to "#{post.post_comments.count} コメント", public_post_path(post.id) %></p>
        </tr>
      <% end %>
    </tbody>
  <% end %>
</table>